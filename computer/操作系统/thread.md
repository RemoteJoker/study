线程
正如之前所言，线程是办公室里面的人，那么就会有以下问题
1.一开始就这么多人吗？
2.人怎么来的?

在了解线程之前首先应当明白为啥会有这个东西，在计算机领域有一个很重要的概念[并行]，很多教材讲述了它，但没有结合实际，导致初学者可能对此有疑惑，这里是我的一些感悟

电脑中有一个[CPU]，它在执行每一条指令，现在举两个例子

A:CPU含有1个核心，每分钟执行100条指令
B:CPU含有2个核心，每分钟执行100条指令

你的程序需要执行300条指令

当你处于情况A时，你只能让它一直执行下去，也就是处于单核下时，搞多线程没什么意义，因为线程说白了也是一种资源，告诉CPU指令从哪开始，然后让CPU执行。我们假定创建线程需要20条指令，如果你创了一条线程，那么两个线程同时跑还要加上创建线程的执行时间，因为A情况只有1个核心，到最后还是1个线程跑完才能让另一个线程跑，最后跑3分钟+。这种完全是愚蠢的行为。

而当你处于情况B时就完全不一样了，两个核心每一个去跑一个线程，假定一个线程跑150条指令，加上创建线程的指令，两分钟之内可以执行完毕。这时多线程的作用就体现了，随着指令的增加，优化将更加明显。

============================

以上只是理想的情况，真实的情况远比这要复杂，作为程序员，一个要了解自身使用的电脑的CPU，一个要了解所使用操作系统的线程接口。
以Windows(系统)+C(语言)为例，有一个创建线程的函数

CreateThread；

这个函数需要6个参数，重点是中间两个，一个是线程执行函数的指针，一个是参数列表。这里有个概念:函数指针，但说白了这是一个地址，就是告诉操作系统，也是告诉CPU，从哪个地方执行代码。
这个函数还可以控制栈大小，安全属性，但不推荐新手尝试。

============================

上面我谈了线程的一些理解和操作系统的接口，但这些只是基础的内容，接下来我来写深一点的

既然线程是操作系统负责实现的，那么不同的操作系统实现的原理也有所不同，还是以Windows为例

Windows分为两层:用户层和内核层

当你创建一个线程的时候[开始]，这实际上是用户层发起了请求，然后这个请求会先到达用户层与内核层的关卡:ntdll.dll；里面有一个函数PsCreateThread,这个函数主要负责检查你传入的参数是否合理正确，检查成功后会触发系统调用进入内核层，然后内核中也有一个PsCreateThread，与之前不同的是这个是真正的创建线程的函数，接下来我来描述一下这个真正的函数的流程。

1.分配线程环境块[TEB]
存储线程的寄存器状态，栈信息，线程局部存储
2.分配用户栈和内核栈
用户栈:存储线程的函数调用栈
内核栈:执行内核模式代码
3.初始化线程上下文
CPU寄存器初始化
设置初始执行状态
4.插入线程到调度队列[准备执行]
5.返回线程句柄和ID

到此我想说:线程才是真正干活的主体，多线程是为了提升所在进程的工作效率，但是要注意硬件。

篇幅关系，只能谈这么多，如果想了解更多关于线程的知识，可以来B站，我是UP主:RemoteJoker